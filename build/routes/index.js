function ensureAuthenticated(e,t,o){return e.isAuthenticated()?o():void t.redirect("/login")}var express=require("express"),router=express.Router();module.exports=function(e){router.get("/",function(e,t){t.render("index",{user:e.user})}),router.get("/confbooking",ensureAuthenticated,function(e,t){console.log(e.user),t.render("confbooking",{user:e.user})}),router.post("/postconf",ensureAuthenticated,function(e,t){console.log(e.body),console.log(" --------------------------------------"),console.log(e.user),t.json("complete"),t.end()}),router.get("/info",ensureAuthenticated,function(e,t){console.log(e.user),t.json(e.user)}),router.get("/test",ensureAuthenticated,function(e,t){console.log(e.user),t.render("test",{user:e.user})}),router.get("/account",ensureAuthenticated,function(e,t){console.log(e.user),t.render("account",{user:e.user})}),router.get("/login",function(e,t){t.render("login",{message:e.flash("message")})}),router.post("/login",e.authenticate("login",{successRedirect:"/employee?ui_action=getEmpList",failureRedirect:"/login",failureFlash:!0})),router.get("/signup",function(e,t){t.render("signup",{message:e.flash("message")})}),router.post("/signup",e.authenticate("signup",{successRedirect:"/employee?ui_action=getEmpList",failureRedirect:"/signup",failureFlash:!0})),router.get("/auth/facebook",e.authenticate("facebook"),function(e,t){}),router.get("/auth/facebook/callback",e.authenticate("facebook",{failureRedirect:"/login"}),function(e,t){t.redirect("/employee?ui_action=getEmpList")}),router.get("/logout",function(e,t){e.logout(),t.redirect("/login")});var t=require("./ApplicationController");return router.get("*",ensureAuthenticated,t.processRequest),router.post("*",ensureAuthenticated,t.processRequest),router};